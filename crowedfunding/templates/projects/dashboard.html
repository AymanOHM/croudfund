{% extends 'base.html' %}
{% block title %}My Dashboard{% endblock %}
{% block content %}
<h1 class="mb-4">My Dashboard</h1>
<div class="row g-4">
  <div class="col-lg-6">
    <div class="card h-100">
      <div class="card-header d-flex justify-content-between align-items-center">
        <h5 class="mb-0">My Projects</h5>
        <a href="{% url 'create_project' %}" class="btn btn-sm btn-primary">New Project</a>
      </div>
      <div class="card-body p-0">
        {% if user_projects %}
        <div class="list-group list-group-flush">
          {% for project in user_projects %}
          <div class="list-group-item d-flex justify-content-between align-items-center">
            <div class="me-2">
              <a href="{% url 'project_detail' project.slug %}"><strong>{{ project.title }}</strong></a><br>
              <small class="text-muted">{{ project.donation_percentage|floatformat:0 }}% funded â€¢ {{ project.total_donations }} / {{ project.total_target }}</small>
            </div>
            <div class="text-nowrap">
              {% if not project.donations.exists %}
              <a href="{% url 'edit_project' project.slug %}" class="btn btn-sm btn-outline-secondary">Edit</a>
              {% endif %}
            </div>
          </div>
          {% endfor %}
        </div>
        {% else %}
        <p class="text-muted m-3">You haven't created any projects yet.</p>
        {% endif %}
      </div>
    </div>
  </div>
  <div class="col-lg-6">
    <div class="card h-100">
      <div class="card-header">
        <h5 class="mb-0">My Donations</h5>
      </div>
      <div class="card-body p-0">
        {% if user_donations %}
        <div class="list-group list-group-flush">
          {% for donation in user_donations %}
          <div class="list-group-item d-flex justify-content-between align-items-center">
            <div class="me-2">
              <a href="{% url 'project_detail' donation.project.slug %}"><strong>{{ donation.project.title }}</strong></a><br>
              <small class="text-muted">{{ donation.donated_at|timesince }} ago</small>
            </div>
            <span>${{ donation.amount }}</span>
          </div>
          {% endfor %}
        </div>
        {% else %}
        <p class="text-muted m-3">You haven't donated to any projects yet.</p>
        {% endif %}
      </div>
    </div>
  </div>
</div>
{% endblock %}